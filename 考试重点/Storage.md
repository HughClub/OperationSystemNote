# 存储器管理

## 层次结构

CPU寄存器->高速缓存->主存->辅存

### 装入

1.  绝对装入:直接使用物理地址
2.  可重定位装入(静态重定位):使用一个基址寄存器 所有的物理地址等于偏移+逻辑地址
3.  动态运行时装入:逻辑地址到物理地址的转换推迟到运行时

### 链接

1.  静态链接:先将目标模块和所需库函数链接成一个完整的装配模块 不再拆开
2.  装入时动态链接:装入时 如果有调用 就装入
3.  运行时动态链接:程序执行时进行库的装入

## 连续分配存储管理

### 单一连续分配

独占

### 固定分区分配

1.  划分分区方法
2.  内存分配

### 动态分区分配

#### 数据结构

空闲分区表

空闲分区链

#### 动态分区分配算法

##### 顺序搜索

1.  首次适应 first fit
2.  循环首次适应 next fit
3.  最佳适应 best fit
4.  最坏适应 worst fit

##### 索引搜索

快速适应 quick fit

将空闲分区根据容量大小分类 每类具有相同容量的空闲分区单独设立链表

同时在内存设立一张管理索引表

>   常用空间大小的分区链表+特殊空闲分区链表



伙伴系统 buddy system

按2的幂次进行分配



哈希算法

构建一张以空闲分区大小为关键字的哈希表

#### 分配与回收

### 动态可重定位分区分配

#### 紧凑

compaction:将多个小分区拼接为一个大分区

#### 动态重定位

增加一个重定位寄存器 存放程序的起始地址

则 紧凑时 只需要改寄存器就好

#### 动态重定位分区分配算法

动态分区分配+紧凑

## 交换(swap)

swap:把内存中暂时不能运行的进程或者暂时不用的程序和数据调出到**外存**上 以便腾出足够的内存空间 再把已具备运行条件的进程或进程所需要的程序和数据调入内存



类型

-   整体交换:中级调度
-   页面交换



通常把磁盘空间分为**文件区**和**交换区**

## 分页

1.  [分页](#页表)存储管理:将地址空间和地址空间都分为固定大小区域
2.  [分段](#分段)存储管理:将用户程序的地址空间分为若干大小不同的段 实现离散分配
3.  [段页式](#段页式):分段分页结合

### 页表

>   页面映射表:实现页号`->`物理块号

完成地址变换任务

有效访问时间EAT

访问页表来访问物理块号 **两次访存**

### 分段

将段表放在内存

>   逻辑段`->`物理内存区

段表寄存器:存放段表开始地址和段表长度

### 段页式

每个段的内存用页分配

每个段一个页表

段页式中 获取指令或数据 须三次访存

增设高速缓存 同时利用段号和页号检索